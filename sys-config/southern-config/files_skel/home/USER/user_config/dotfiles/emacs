;; Southern Tools
;;
;;
;; Melpa Repository
(require 'package)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
(package-initialize)
;;
;;
;; Deft package
(use-package deft
  :ensure t
  :init
   (setq deft-extensions '("md" "txt" "org")
         deft-default-extension "md"
         deft-directory "~/Library/Zettelkasten/"
         deft-use-filename-as-title t
         deft-current-sort-method 'title
         deft-recursive t))
(global-set-key [f8] 'deft)

;; Zetteldeft
(use-package zetteldeft
  :ensure t
  :after deft
  :config (zetteldeft-set-classic-keybindings)
  :init
       (setq zetteldeft-link-indicator "[["
             zetteldeft-link-suffix "]]"
             ;;zetteldeft-title-prefix "# "
             zetteldeft-title-prefix "---\nNote ID: \nTitle: ''"
             zetteldeft-title-suffix "\nIn: @\nPage(s)/Pos.: p. \nKeyword(s): #\n---\n# Content:\n\n\n# Comment(s):\n"
             zetteldeft-list-prefix "* "
             zetteldeft-id-format "%Y%m%d%H%M"
             zetteldeft-id-regex "[0-9]\\{12\\}"))

(font-lock-add-keywords 'markdown-mode
   `((,zetteldeft-id-regex
      . font-lock-warning-face)))

(font-lock-add-keywords 'markdown-mode
   `((,(concat "\\[\\["
               zetteldeft-id-regex
               "\\]\\]")
      . font-lock-warning-face)))
(setq deft-new-file-format zetteldeft-id-format)
;; Global settings
(setq
   backup-by-copying t      ; don't clobber symlinks
   backup-directory-alist
    '(("." . "~/.saves/"))    ; don't litter my fs tree
   delete-old-versions t
   kept-new-versions 6
   kept-old-versions 2
   version-control t)       ; use versioned backups